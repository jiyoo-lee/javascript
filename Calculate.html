<!DOCTYPE html>
<html lang = "ko">
<head>
<meta charset="UTF-8">
<meta http-equiv ="X-UA-compatible" content = "IE = edge, chrome = 1">
<meta name ="viewport" content = "width=device-width, initial-scale=1.0">
<title>결제 상품 수량 계산하기</title>
<script src = "./fruits.js"> 
</script>

<script>

	function pay() {
		
		var c = document.getElementById("purchasedNumber").value 
		if( c == 0) {
			alert("구매하실 수량을 선택하세요.")
		}
		else {
			let answer = confirm("정말 구매하시겠습니까?");
			
			if(answer == true){
				location.href = './js_c.html?'+'selectedFruits='+ data + '&count='+c;
			}
			else {
				alert("구매가 취소되었습니다.");
			}
		}
	}

</script>
</head>
<body>
<form name = "frm" id = "frm" method = "get" action = "./homework0720.html">
	<div id = "selectedProducts"> 선택하신 상품 및 금액 : </div>
	<div> 구매하실 수량을 선택해주세요 : 
		<select id = "purchasedNumber">
			<option>0</option>
		</select>
	</div>
</form>
<input type = "button" value = "결제하기" onclick ="pay();">
</body>
<script>

	var data = "";
	var a = document.getElementById("purchasedNumber");
	
	for(var i = 1; i < 11; i++){
		var options = document.createElement("option");
		a.append(options);
		options.append(i);
	}
	
	var url = decodeURI(window.location.search);
	var temp = url.substring(1, url.length);
	var tempArr = temp.split("&");
	
	
	for(var i = 0; i < tempArr.length; i++){
		var selectedFruits = tempArr[i].split("=")[1];
		for(var j = 0; j < fruitsList.length; j++){
			if(selectedFruits == fruitsList[j][0]){
				document.getElementById("selectedProducts").append(selectedFruits+ " (" + fruitsList[j][1] + ") " );
				data += selectedFruits+",";
			}
		}
	}
				
	
	


</script>
</html>